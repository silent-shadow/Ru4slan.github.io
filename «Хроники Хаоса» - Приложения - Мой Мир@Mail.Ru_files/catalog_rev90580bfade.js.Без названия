define(["base/collection","models/app"],function(a,b){"use strict";return a.extend({props:{defaultOptions:{ajaxParams:{check_pics:1},limit:20},func:"app.genre_gender_age",model:b},public:{adapter:function(a){var b={items:[]},c=this.customRef,d=a.data,e=this;return b.items=d.map(function(a){var b,d;if(e.type&&"sale"===e.type){var f=a.view;d={desc:a.desc||f.ShortDescription,id:parseInt(f.ID,10),name:a.name||f.Name,shortName:a.name||f.ShortName,notify:0,mainPic:a.pic||"",pics:{"630x380":f.Pictures.GameCover,"980x370":f.Pictures.BigPic,"120x60":f.Pictures.Pic,"560x210":f.Pictures.Pic2,"143x113":f.Pictures.Pic3,"134x104":f.Pictures.Pic4,"90x70":f.Pictures.Pic5,ico:f.Pictures.PicIco},ref:c||f.ActiveRef,screenshots:[]}}else{for(d={description:a.ShortDescription,id:parseInt(a.ID,10),installations:a.Installations,installationsFormatted:a.InstallationsSpaced,isInstalled:!!a.UABox&&a.UABox.IsInstalled,genres:a.Genre||[],name:a.Name,shortName:a.ShortName,notify:a.notify?1:0,pics:{"630x380":a.Pictures.GameCover,"980x370":a.Pictures.BigPic,"120x60":a.Pictures.Pic,"560x210":a.Pictures.Pic2,"143x113":a.Pictures.Pic3,"134x104":a.Pictures.Pic4,"90x70":a.Pictures.Pic5,ico:a.Pictures.PicIco},ref:c||a.ActiveRef,screenshots:[]},b=1;b<6;b+=1)a.Pictures["Screenshot"+b]&&d.screenshots.push(a.Pictures["Screenshot"+b]);a.PopBox&&a.PopBox.Popularity&&(a.PopBox.Popularity>0?d.popularity="+"+a.PopBox.Popularity:d.popularity=0),a.Votes?(a.Votes.Votes2DigitRounded&&(d.votes2DigitRounded=a.Votes.Votes2DigitRounded),a.Votes.VotesStarsWidth&&(d.votesStarsWidth=a.Votes.VotesStarsWidth)):(d.votes2DigitRounded=0,d.votesStarsWidth=0),a.PromoActions&&a.PromoActions.length&&(d.promo=a.PromoActions.map(function(a){return{id:a.id,name:a.name}}))}return d}),b},setRef:function(a){this.customRef=a}}})});