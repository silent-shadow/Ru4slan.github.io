define(["jquery","counters","base/event"],function(a,b,c){var d;return d=c.extend({props:{defaultOptions:{autostart:!0,timeout:5e3}},protected:{tick:function(){var a=this.options.timeout,b=Date.now()-this.params.timestamp;"function"==typeof a&&(a=a(b)),clearTimeout(this.timer),this.timer=setTimeout(function(){this.log(a),this.tick()}.bind(this),a)},log:function(a){var c={category:{},version:1};this.params.time=a,this.lastCallTime=Date.now(),c.category[this.category]=this.params,b.dwh(c)}},public:{init:function(a,b){this.category=a,this.params=b,this.options.autostart&&this.start()},destroy:function(){this.pause(),delete this.timer},start:function(){this.params.timestamp=Date.now(),this.tick()},resume:function(){this.paused&&(this.paused=!1,this.tick())},pause:function(){var a=Date.now()-this.lastCallTime;this.paused=!0,clearTimeout(this.timer),a&&this.log(a)}}})});