define(["jquery","base/view","util/dom-heap","util/scrollbar-width"],function(a,b,c,d){"use strict";return b.extend({singleton:!0,autoInit:!0,props:{cssClasses:{main:"b-popup__fade",popupContainer:"b-popup__fade__container"},events:{click:"onClick",mousewheel:"onMouseWheel",scroll:"onScroll"},defaultOptions:{scrollDelta:5}},public:{init:function(){return this.setElement(a("<div></div>").addClass(this.cssClasses.main)),this.$container=a("<div></div>").addClass(this.cssClasses.popupContainer).appendTo(this.$el),this.delegateEvents(),c.insert(this.$el),setTimeout(function(){this.$el.addClass("ready")}.bind(this),1e3),this},show:function(){return this.$el.addClass("show"),a(document.body).trigger("show-popup").addClass("popup-show"),this.hasScroll()&&a(document.body).css("paddingRight",d),this},hide:function(){return this.$el.removeClass("show"),a(document.body).trigger("hide-popup").removeClass("popup-show").css("paddingRight",0),this},showPreloader:function(){return this.$el.addClass("preloader"),this},hidePreloader:function(){return this.$el.removeClass("preloader"),this},isVisible:function(){return this.$el.is(":visible")},getContainer:function(){return this.$container},setHeight:function(a){return this.$container.height(a),this}},protected:{hasScroll:function(){return document.body.scrollHeight>document.body.clientHeight},onClick:function(b,c){this.trigger("click",{target:a(c.target)})},onMouseWheel:function(a,b){b.stopPropagation()},onScroll:function(b,c){a(window).trigger("scroll")}}})});